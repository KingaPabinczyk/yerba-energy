{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">ğŸ›’ TwÃ³j koszyk</h2>

{% if products %}
<div class="table-responsive">
  <table class="table cart-table table-bordered align-middle shadow-sm bg-white">
    <thead class="table-dark">
      <tr>
        <th>Produkt</th>
        <th>Cena</th>
        <th>IloÅ›Ä‡</th>
        <th>Suma</th>
        <th>Akcje</th>
      </tr>
    </thead>
    <tbody>
      {% for item in products %}
      <tr>
        <td>
          <a href="{{ url_for('main.product_detail', product_id=item.product.id) }}" class="text-decoration-none">
            {{ item.product.name }}
          </a>
        </td>
        <td>{{ "%.2f"|format(item.product.price) }} zÅ‚</td>
        <td>
          <form method="post" action="{{ url_for('main.update_cart', product_id=item.product.id) }}" class="d-inline-flex align-items-center">
            <button type="submit" name="action" value="decrease" class="btn btn-sm btn-outline-danger">âˆ’</button>
            <span class="px-2 py-1 border rounded bg-light fw-bold">{{ item.qty }}</span>
            <button type="submit" name="action" value="increase" class="btn btn-sm btn-outline-success">+</button>
          </form>
        </td>
        <td class="fw-bold">{{ "%.2f"|format(item.subtotal) }} zÅ‚</td>
        <td>
          <form method="post" action="{{ url_for('main.remove_from_cart', product_id=item.product.id) }}">
            <button type="submit" class="btn btn-sm btn-outline-secondary">ğŸ—‘ï¸ UsuÅ„</button>
          </form>
        </td>
      </tr>
      {% endfor %}
      <tr class="table-secondary">
        <td colspan="4" class="text-end fw-bold">Razem:</td>
        <td class="fw-bold">{{ "%.2f"|format(total) }} zÅ‚</td>

      </tr>
    </tbody>
  </table>
</div>

<div class="mt-3 d-flex gap-2">
  <form method="post" action="{{ url_for('main.clear_cart') }}">
  <button type="submit" class="btn btn-outline-danger">ğŸ—‘ï¸ OprÃ³Å¼nij koszyk</button>
</form>

  <button class="btn btn-success">âœ… ZÅ‚Ã³Å¼ zamÃ³wienie</button>
</div>

{% else %}
<p class="text-muted">Koszyk jest pusty.</p>
{% endif %}
{% endblock %}
